{% extends 'base.html' %}

<!--{% block content %}-->
<!--  <form method="POST">-->
<!--    {% csrf_token %}-->
<!--    <label for="name">Name:</label>-->
<!--    <input type="text" id="name" name="name"><br>-->

<!--    <label for="dob">DOB:</label>-->
<!--    <input type="date" id="dob" name="dob"><br>-->

<!--    <label for="age">Age:</label>-->
<!--    <input type="number" id="age" name="age"><br>-->

<!--    <label for="gender">Gender:</label>-->
<!--    <input type="radio" id="gender_male" name="gender" value="M"><br>-->
<!--    <label for="gender_male">Male</label>-->
<!--    <input type="radio" id="gender_female" name="gender" value="F"><br>-->
<!--    <label for="gender_female">Female</label>-->
<!--    <input type="radio" id="gender_other" name="gender" value="O"><br>-->
<!--    <label for="gender_other">Other</label>-->

<!--    <label for="phone">Phone:</label>-->
<!--    <input type="tel" id="phone" name="phone"><br>-->

<!--    <label for="mail_id">Mail ID:</label>-->
<!--    <input type="email" id="mail_id" name="mail_id"><br>-->

<!--    <label for="address">Address:</label>-->
<!--    <input type="text" id="address" name="address"><br>-->

<!--    <label for="district">District:</label>-->
<!--    <select id="district" name="district"><br>-->
<!--      <option value="Ernakulam">Ernakulam</option>-->
<!--      <option value="Thrissur">Thrissur</option>-->
<!--      <option value="Kozhikode">Kozhikode</option>-->
<!--    </select>-->

<!--    <label for="branch">Branch:</label>-->
<!--    <select id="branch" name="branch"><br>-->
<!--      <option value="Aluva">Aluva</option>-->
<!--      <option value="Edapally">Edapally</option>-->
<!--      <option value="Kakkanad">Kakkanad</option>-->
<!--    </select><br>-->

<!--    <label for="account_type">Account Type:</label>-->
<!--    <select id="account_type" name="account_type"><br>-->
<!--      <option value="Savings Account">Savings Account</option>-->
<!--      <option value="Current Account">Current Account</option>-->
<!--    </select><br>-->

<!--    <label for="materials_provided">Materials Provided:</label>-->
<!--    <input type="checkbox" id="debit_card" name="materials_provided" value="Debit Card"><br>-->
<!--    <label for="debit_card">Debit Card:</label>-->
<!--    <input type="checkbox" id="credit_card" name="materials_provided" value="Credit Card"><br>-->
<!--    <label for="debit_card">Credit Card:</label>-->
<!--    <input type="submit" value="Submit">-->
<!--  </form>-->
<!--{% if messages %}-->
<!--    <ul class="messages">-->
<!--        {% for message in messages %}-->
<!--            <li {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>-->
<!--        {% endfor %}-->
<!--    </ul>-->
<!--{% endif %}-->
<!--{% endblock %}-->

<form method="POST" action="{% url 'new_registration' %}">
    {% csrf_token %}
    <label for="name">Name:</label>
    <input type="text" id="name" name="name" required>
    <br>
    <label for="dob">DOB:</label>
    <input type="date" id="dob" name="dob" required>
    <br>
    <label for="age">Age:</label>
    <input type="number" id="age" name="age" min="0" required>
    <br>
    <label for="gender">Gender:</label>
    <select id="gender" name="gender" required>
        <option value="">--Please select--</option>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
        <option value="Other">Other</option>
    </select>
    <br>
    <label for="phone">Phone Number:</label>
    <input type="tel" id="phone" name="phone" pattern="[0-9]{10}" required>
    <br>
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required>
    <br>
    <label for="address">Address:</label>
    <textarea id="address" name="address" rows="4" cols="50" required></textarea>
    <br>
<!--    <label for="district">District:</label>-->
<!--    <select id="district" name="district"  required>-->
<!--        <option value="">&#45;&#45;Please select&#45;&#45;</option>-->
<!--        <option value="Ernakulam">Ernakulam</option>-->
<!--        <option value="Thrissur">Thrissur</option>-->
<!--        <option value="Kozhikode">Kozhikode</option>-->
<!--    </select>-->
<!--    <br>-->
<!--    <label for="branch">Branch:</label>-->
<!--    <select id="branch" name="branch" onchange="getBranches()" required>-->
<!--        <option value="">&#45;&#45;Please select&#45;&#45;</option>-->
<!--        <option value="Ernakulam">Ernakulam</option>-->
<!--        <option value="Thrissur">Thrissur</option>-->
<!--        <option value="Kozhikode">Kozhikode</option>-->
<!--    </select>-->
     <label for="district">Districtjiuy:</label>
    <select id="district" name="district"  required>
        <option value="">--Please select--</option>
        <option value="Ernakulam">Ernakulam</option>
        <option value="Thrissur">Thrissur</option>
        <option value="Kozhikode">Kozhikode</option>
    </select>
    <br>
<!--    <label for="branch">Branch:</label>-->
<!--    <select id="branch" name="branch" onchange="" required>-->
<!--        <option value="">&#45;&#45;Please select&#45;&#45;</option>-->
<!--        <option value="Ernakulam">Ernakulam</option>-->
<!--        <option value="Thrissur">Thrissur</option>-->
<!--        <option value="Kozhikode">Kozhikode</option>-->
<!--    </select>-->



    <br>
    <label for="account_type">Account Type:</label>
    <select id="account_type" name="account_type" required>
        <option value="">--Please select--</option>
        <option value="Savings Account">Savings Account</option>
        <option value="Current Account">Current Account</option>
        <option value="Fixed Deposit Account">Fixed Deposit Account</option>
    </select>

    <br>
    <label>Materials provide:</label>
    <br>
    <input type="checkbox" id="debit_card" name="materials" value="Debit Card">
    <label for="debit_card">Debit Card</label>
    <br>
    <input type="checkbox" id="credit_card" name="materials" value="Credit Card">
    <label for="credit_card">Credit Card</label>
    <br>
    <input type="checkbox" id="cheque_book" name="materials" value="Cheque Book">
    <label for="cheque_book">Cheque Book</label>
    <br>
    <br>
    <input type="submit" value="Submit">
    <input type="button" value="Logout" onclick="location.href='{% url 'logout' %}'">




</form>

<script>


<!--&lt;!&ndash;function getBranches() {&ndash;&gt;-->
<!--&lt;!&ndash;  var district = document.getElementById("district");&ndash;&gt;-->
<!--  var branch = document.getElementById("branch");-->

<!--  district.addEventListener("change", function() {-->
<!--    var district_id = district.value;-->
<!--    var url = '/get_branches/' + district_id + '/';-->

<!--    // Send a GET request to the server to fetch the branches for the selected district-->
<!--    fetch(url)-->
<!--      .then(function(response) {-->
<!--        return response.json();-->
<!--      })-->
<!--      .then(function(data) {-->
<!--        // Clear the previous options from the branch select element-->
<!--        while (branch.options.length > 1) {-->
<!--          branch.remove(1);-->
<!--        }-->

<!--        // Add the new branch options to the select element-->
<!--        for (var i = 0; i < data.length; i++) {-->
<!--          var option = document.createElement("option");-->
<!--          option.text = data[i].name;-->
<!--          option.value = data[i].id;-->
<!--          branch.add(option);-->
<!--        }-->
<!--      })-->
<!--      .catch(function(error) {-->
<!--        console.log(error);-->
<!--      });-->
<!--  });-->
<!--}-->
<!-- <script>-->
<!--    var branchSelect = document.getElementById('branch-select');-->
<!--    var districtSelect = document.getElementById('district-select');-->
<!--    districtSelect.addEventListener('change', function() {-->
<!--      var districtId = districtSelect.value;-->
<!--      var url = '/get-branches/' + districtId;-->
<!--      fetch(url)-->
<!--        .then(response => response.json())-->
<!--        .then(data => {-->
<!--          branchSelect.innerHTML = '';-->
<!--          data.forEach(branch => {-->
<!--            var option = document.createElement('option');-->
<!--            option.text = branch.name;-->
<!--            option.value = branch.id;-->
<!--            branchSelect.add(option);-->
<!--          });-->
<!--        });-->
<!--    });-->
  </script>
{% endblock %}

<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Dependent Dropdown in Django</title>
</head>
<body>
<h2>Person Form</h2>

<form method="post" id="personForm" data-cities-url="{% url 'ajax_load_branches' %}">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="Submit">
</form>

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
    $("#id_district").change(function () {
        const url = $("#personForm").attr("data-branches-url");  // get the url of the `load_branches` view
        const districtId = $(this).val();  // get the selected district ID from the HTML input

        $.ajax({                       // initialize an AJAX request
            url: url,                    // set the url of the request (= /persons/ajax/load-branches/ )
            data: {
                'district_id': districtId       // add the district id to the GET parameters
            },
            success: function (data) {   // `data` is the return of the `load_branches` view function
                $("#id_branch").html(data);  // replace the contents of the branch input with the data that came from the server
                /*

                let html_data = '<option value="">---------</option>';
                data.forEach(function (branch) {
                    html_data += `<option value="${branch.id}">${branch.name}</option>`
                });
                console.log(html_data);
                $("#id_branch").html(html_data);

                */
            }
        });

    });
</script>

</body>
</html>